{
  "registryVersion": "1.0",
  "root": ".github",
  "package": {
    "name": "planarwar-github",
    "purpose": "Repo automation (CI checks, guard rails, workflows)."
  },
  "services": {
    "workflows.worldcoreRegistryCheck": {
      "kind": "workflow",
      "service": "ci.guard",
      "path": ".github/workflows/worldcore-registry-check.yml",
      "functions": [
        "On PRs touching worldcore/** or WorldCoreRegistry.json, run registry guard in CI",
        "Fail PR if WorldCoreRegistry.json is out of sync with worldcore source tree"
      ],
      "dependsOn": [
        "actions/checkout@v4",
        "actions/setup-node@v4 (node 20)",
        "node worldcore/tools/registryCheck.js --mode=ci"
      ],
      "provides": [
        "Pull request CI check: registry-check"
      ],
      "owns": [
        "Registry consistency gate for worldcore package"
      ],
      "notes": [
        "Triggered by pull_request paths filter for worldcore/**, WorldCoreRegistry.json, and this workflow file.",
        "Runs registryCheck.js in CI mode to enforce registry freshness."
      ]
    },
    "scripts.registryIndexPathsCheck": {
      "kind": "script",
      "service": "ci.guard",
      "path": ".github/scripts/registryIndexPathsCheck.js",
      "functions": [
        "Parse RegistryIndex.json and each listed registry JSON",
        "Validate registry entry paths (file/dir) exist",
        "Validate glob paths (e.g. *.json) match at least one file",
        "Emit helpful hints for case mismatches on Linux"
      ],
      "dependsOn": [
        "node:fs",
        "node:path"
      ],
      "provides": [
        "CLI: node .github/scripts/registryIndexPathsCheck.js"
      ],
      "owns": [
        "Cross-registry path integrity checks"
      ],
      "notes": [
        "Hybrid registries supported (service graph entries + file catalog entries).",
        "Conservative: missing paths fail CI; glob patterns must match >= 1 file."
      ]
    },
    "workflows.registryIndexPathsCheck": {
      "kind": "workflow",
      "service": "ci.guard",
      "path": ".github/workflows/registry-index-paths-check.yml",
      "functions": [
        "On PRs/pushes touching RegistryIndex or any *Registry.json, validate registry JSON and referenced paths",
        "Fail CI if RegistryIndex points to missing registries or registries point to missing files"
      ],
      "dependsOn": [
        "actions/checkout@v4",
        "actions/setup-node@v4 (node 20)",
        "node .github/scripts/registryIndexPathsCheck.js"
      ],
      "provides": [
        "Pull request CI check: registry-index-paths-check"
      ],
      "owns": [
        "RegistryIndex + cross-registry path sanity gate"
      ],
      "notes": [
        "Prevents broken registry navigation from creeping in.",
        "Path filters target RegistryIndex.json, any *Registry.json, and this workflow/script."
      ]
    },
    "scripts.noMudHelperFunctionsCheck": {
      "kind": "script",
      "service": "ci.guard",
      "path": ".github/scripts/noMudHelperFunctionsCheck.js",
      "functions": [
        "Scan the repo for disallowed MudHelperFunctions legacy facade usage"
      ],
      "dependsOn": [
        "node:fs",
        "node:path"
      ],
      "provides": [
        "CLI: node .github/scripts/noMudHelperFunctionsCheck.js"
      ],
      "owns": [
        "Guardrail: prevent reintroducing MudHelperFunctions legacy facade"
      ],
      "notes": [
        "Used as a preflight/CI guardrail to keep the codebase on the unified nearby-handle + TargetResolver path."
      ]
    }
  }
}
