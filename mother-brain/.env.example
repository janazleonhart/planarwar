# Mother Brain v0.4
#
# Mother Brain loads env from:
#   1) mother-brain/.env (if present)
#   2) repo-root .env (../.env)
#   3) process env (systemd/docker/etc)

# Core knobs (safe defaults exist)
#MOTHER_BRAIN_TICK_MS=5000
#MOTHER_BRAIN_LOG_LEVEL=info   # debug|info|warn|error
#MOTHER_BRAIN_MODE=observe     # observe|apply (v0.4 is still observe-only)

# Optional probe timeouts (ms)
#MOTHER_BRAIN_DB_TIMEOUT_MS=2000
#MOTHER_BRAIN_WS_TIMEOUT_MS=2500

# Optional: WS ping/pong health measurement
# - When MOTHER_BRAIN_WS_URL is set, Mother Brain can periodically send a WS ping and measure pong latency.
# - Useful for verifying the room/socket server is reachable and responsive.
#MOTHER_BRAIN_WS_PING_EVERY_TICKS=3
#MOTHER_BRAIN_WS_PING_TIMEOUT_MS=2000

# Optional: DB brain:* spawn_points summary
# - Every N ticks, Mother Brain will query spawn_points WHERE spawn_id LIKE 'brain:%'
# - This is read-only, and meant for quick visibility while waves are being planned.
#MOTHER_BRAIN_SPAWN_SUMMARY_EVERY_TICKS=12
#MOTHER_BRAIN_SPAWN_SUMMARY_TOP_N=8

# DB connectivity (choose ONE style):
# Style A (recommended): Planar War legacy vars (bridged automatically)
#PW_DB_HOST=localhost
#PW_DB_PORT=5432
#PW_DB_USER=planarwar
#PW_DB_PASS=
#PW_DB_NAME=planarwar_main

# Style B: direct URL (overrides PW_DB_* bridging)
#MOTHER_BRAIN_DB_URL=postgresql://user:pass@localhost:5432/planarwar_main

# WS connectivity (required for ws_mud / ws_mud_script goals)
# NOTE: the MMO backend typically expects auth/session params in the URL.
# Example:
#   ws://localhost:3001/ws?token=<token>&characterId=<id>
#MOTHER_BRAIN_WS_URL=ws://localhost:3001

# Optional: schema awareness (read-only)
# How often to probe spawn_points existence/columns and report in tick snapshot.
MOTHER_BRAIN_SCHEMA_PROBE_EVERY_TICKS=30

#Log Location
PW_FILELOG=/home/rimuru/planarwar/log/{scope}.log

# Reduce log spam
MOTHER_BRAIN_TICK_LOG_EVERY_TICKS=6
MOTHER_BRAIN_TICK_LOG_ON_CHANGE=true

# -----------------------------------------------------------------------------
# Goals runner (v0.20)
# -----------------------------------------------------------------------------
# A safe, observe-only “test pilot” that runs small checks and writes structured
# JSONL reports.
#
#MOTHER_BRAIN_GOALS_EVERY_TICKS=0      # 0 disables (recommended default)
#MOTHER_BRAIN_GOALS_FILE=./goals.json # optional hot-reload JSON array of goals
#MOTHER_BRAIN_GOALS_PACKS=core,web_smoke,admin_smoke,player_smoke # optional builtin suites (ignored if GOALS_FILE is non-empty)
#MOTHER_BRAIN_GOALS_PACKS=all_smoke # convenience pack (core + web_smoke + admin_smoke + player_smoke)
#MOTHER_BRAIN_GOALS_REPORT_DIR=       # optional; defaults to dirname(PW_FILELOG)/mother-brain

# Builtin packs that require service base URLs
#MOTHER_BRAIN_WEB_BACKEND_HTTP_BASE=http://127.0.0.1:4000 # enables web_smoke/admin_smoke packs (must be reachable from mother-brain; if running in Docker use host.docker.internal)
#MOTHER_BRAIN_WEB_BACKEND_ADMIN_TOKEN=changeme # optional: enables admin_smoke against protected /api/admin endpoints (fallback: PW_ADMIN_TOKEN)

# Daemon/prod auth (recommended over human tokens): service token support.
# - web-backend verifies this using PW_SERVICE_TOKEN_SECRET (recommended).
# - rotation: PW_SERVICE_TOKEN_SECRET_PREV can be set to accept the previous value during a cutover.
# - fallback: PW_AUTH_JWT_SECRET is accepted for dev convenience, but is not recommended for prod.
# - Mother Brain can send it via either Authorization Bearer or x-service-token.
# You can provide either a single generic token (legacy) OR role-scoped tokens.
# Role-scoped tokens let you keep least-privilege for read-only checks while still
# allowing editor/root-only checks where needed.
#
# Legacy (single token):
#MOTHER_BRAIN_WEB_BACKEND_SERVICE_TOKEN=svc:mother-brain:readonly:<sighex>
#
# Recommended (two tokens):
#MOTHER_BRAIN_WEB_BACKEND_SERVICE_TOKEN_READONLY=svc:mother-brain:readonly:<sighex>
#MOTHER_BRAIN_WEB_BACKEND_SERVICE_TOKEN_EDITOR=svc:mother-brain:editor:<sighex>


# MMO backend admin smoke (character lifecycle)
#MOTHER_BRAIN_MMO_BACKEND_HTTP_BASE=http://127.0.0.1:3001 # mmo-backend http base (same port as WS)
# Legacy (single token):
#MOTHER_BRAIN_MMO_BACKEND_SERVICE_TOKEN=svc:mother-brain:editor:<sighex>
#
# Recommended (role-scoped):
#MOTHER_BRAIN_MMO_BACKEND_SERVICE_TOKEN_READONLY=svc:mother-brain:readonly:<sighex>
#MOTHER_BRAIN_MMO_BACKEND_SERVICE_TOKEN_EDITOR=svc:mother-brain:editor:<sighex>
#MOTHER_BRAIN_TEST_USER_ID=<uuid> # required for admin.characters.smoke_cycle goal
